(this["webpackJsonpghostmv1-control"]=this["webpackJsonpghostmv1-control"]||[]).push([[8],{199:function(e){e.exports=JSON.parse('{"name":"ghostmv1-control","version":"1.0.0-beta","private":true,"dependencies":{"@ionic/react":"^4.11.0","@ionic/react-router":"^4.11.0","@reduxjs/toolkit":"^1.1.0","@types/jest":"^24.0.18","@types/node":"^12.7.12","@types/react":"^16.9.5","@types/react-dom":"^16.9.1","@types/react-redux":"^7.1.5","@types/react-router":"^5.1.1","@types/react-router-dom":"^5.1.0","@types/web-bluetooth":"^0.0.4","ionicons":"^4.6.3","node-sass":"^4.13.0","react":"^16.10.2","react-circular-input":"^0.1.6","react-dom":"^16.10.2","react-redux":"^7.1.3","react-router":"^5.1.0","react-router-dom":"^5.1.0","react-scripts":"3.2.0","redux":"^4.0.4","redux-devtools":"^3.5.0","redux-thunk":"^2.3.0","typescript":"3.6.3","typescript-task-queue":"^1.0.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"description":"An Ionic project"}')},226:function(e,t,n){e.exports=n(399)},236:function(e,t,n){var r={"./ion-action-sheet-controller_8.entry.js":[405,43],"./ion-action-sheet-ios.entry.js":[406,44],"./ion-action-sheet-md.entry.js":[407,45],"./ion-alert-ios.entry.js":[408,24],"./ion-alert-md.entry.js":[409,25],"./ion-app_8-ios.entry.js":[410,11],"./ion-app_8-md.entry.js":[411,12],"./ion-avatar_3-ios.entry.js":[412,46],"./ion-avatar_3-md.entry.js":[413,47],"./ion-back-button-ios.entry.js":[414,48],"./ion-back-button-md.entry.js":[415,49],"./ion-backdrop-ios.entry.js":[416,81],"./ion-backdrop-md.entry.js":[417,82],"./ion-button_2-ios.entry.js":[418,50],"./ion-button_2-md.entry.js":[419,51],"./ion-card_5-ios.entry.js":[420,52],"./ion-card_5-md.entry.js":[421,53],"./ion-checkbox-ios.entry.js":[422,54],"./ion-checkbox-md.entry.js":[423,55],"./ion-chip-ios.entry.js":[424,56],"./ion-chip-md.entry.js":[425,57],"./ion-col_3.entry.js":[426,83],"./ion-datetime_3-ios.entry.js":[427,20],"./ion-datetime_3-md.entry.js":[428,21],"./ion-fab_3-ios.entry.js":[429,58],"./ion-fab_3-md.entry.js":[430,59],"./ion-img.entry.js":[431,84],"./ion-infinite-scroll_2-ios.entry.js":[432,39],"./ion-infinite-scroll_2-md.entry.js":[433,40],"./ion-input-ios.entry.js":[434,60],"./ion-input-md.entry.js":[435,61],"./ion-item-option_3-ios.entry.js":[436,62],"./ion-item-option_3-md.entry.js":[437,63],"./ion-item_8-ios.entry.js":[438,64],"./ion-item_8-md.entry.js":[439,65],"./ion-loading-ios.entry.js":[440,26],"./ion-loading-md.entry.js":[441,27],"./ion-menu_4-ios.entry.js":[442,18],"./ion-menu_4-md.entry.js":[443,19],"./ion-modal-ios.entry.js":[444,14],"./ion-modal-md.entry.js":[445,15],"./ion-nav_5.entry.js":[446,13],"./ion-popover-ios.entry.js":[447,16],"./ion-popover-md.entry.js":[448,17],"./ion-progress-bar-ios.entry.js":[449,66],"./ion-progress-bar-md.entry.js":[450,67],"./ion-radio_2-ios.entry.js":[451,32],"./ion-radio_2-md.entry.js":[452,33],"./ion-range-ios.entry.js":[453,68],"./ion-range-md.entry.js":[454,69],"./ion-refresher_2-ios.entry.js":[455,41],"./ion-refresher_2-md.entry.js":[456,42],"./ion-reorder_2-ios.entry.js":[457,37],"./ion-reorder_2-md.entry.js":[458,38],"./ion-ripple-effect.entry.js":[459,85],"./ion-route_4.entry.js":[460,70],"./ion-searchbar-ios.entry.js":[461,28],"./ion-searchbar-md.entry.js":[462,29],"./ion-segment_2-ios.entry.js":[463,71],"./ion-segment_2-md.entry.js":[464,72],"./ion-select_3-ios.entry.js":[465,34],"./ion-select_3-md.entry.js":[466,35],"./ion-slide_2-ios.entry.js":[467,86],"./ion-slide_2-md.entry.js":[468,87],"./ion-spinner.entry.js":[469,73],"./ion-split-pane-ios.entry.js":[470,88],"./ion-split-pane-md.entry.js":[471,89],"./ion-tab-bar_2-ios.entry.js":[472,74],"./ion-tab-bar_2-md.entry.js":[473,75],"./ion-tab_2.entry.js":[474,36],"./ion-text.entry.js":[475,76],"./ion-textarea-ios.entry.js":[476,77],"./ion-textarea-md.entry.js":[477,78],"./ion-toast-ios.entry.js":[478,30],"./ion-toast-md.entry.js":[479,31],"./ion-toggle-ios.entry.js":[480,22],"./ion-toggle-md.entry.js":[481,23],"./ion-virtual-scroll.entry.js":[482,90]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=236,e.exports=a},237:function(e,t,n){var r={"./ion-icon.entry.js":[486,98]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=237,e.exports=a},249:function(e,t,n){},250:function(e,t,n){},253:function(e,t){},255:function(e,t){},288:function(e,t){},289:function(e,t){},397:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(55),s=n.n(c),i=n(21),o=n(1),u=n.n(o),l=n(35),d=n(2),p=n(217),f=n(489),h=(n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(56)),m=n(65),b=(n(250),n(95)),y=n.n(b),v=n(23),x=n(80),j=n(8),w="battery_service",g="battery_level",E="00887766-5544-3322-1100-aabbccddeeff",C="11887766-5544-3322-1100-aabbccddeeff",k="ffeeddcc-bbaa-0011-2233-445566778899",O={uuid:"ffeeddcc-bbaa-0011-2233-445566778804",label:"Temperatures",properties:{notify:!0,read:!0,write:!0,type:"hex"}},N={uuid:"ffeeddcc-bbaa-0011-2233-445566778805",label:"Current",properties:{notify:!0,read:!0,write:!0,type:"hex"}},_={uuid:"ffeeddcc-bbaa-0011-2233-445566778806",label:"Pairing Key",properties:{notify:!0,read:!0,write:!0,type:"hex"}},S=(n(219),n(220)),P=function(e){for(var t=new ArrayBuffer(6),n=new DataView(t),r=0;r<6;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return n},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n="";if(e&&e.byteLength>0)if(8===t)for(var r=0;r<e.byteLength;r++)n+=e.getUint8(r).toString(16);else if(16===t)for(var a=0;a<e.byteLength;a+=2)n+=e.getUint16(a,!1).toString(16).padStart(4,"0");return n},A=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(e.readValue());case 2:return t=n.sent,n.abrupt("return",L(t));case 4:case"end":return n.stop()}}))},T=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(e.readValue());case 2:if(1!==(t=n.sent).byteLength){n.next=7;break}return n.abrupt("return",t.getUint8(0));case 7:if(2!==t.byteLength){n.next=9;break}return n.abrupt("return",t.getUint16(0,!0));case 9:return n.abrupt("return",0);case 10:case"end":return n.stop()}}))},U=function(e){var t,n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(e.readValue());case 2:for(t=a.sent,n=[],r=0;r<t.byteLength;r+=2)n.push(t.getUint16(r,!1));return a.abrupt("return",n);case 6:case"end":return a.stop()}}))},B=function(e,t){var n,r,a;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(t.length<6)){c.next=2;break}return c.abrupt("return");case 2:for(n=new ArrayBuffer(12),r=new DataView(n),a=0;a<6;a++)r.setUint16(2*a,t[a],!1);return c.next=7,u.a.awrap(e.writeValue(r));case 7:case"end":return c.stop()}}))},D=new function e(){var t=this;Object(j.a)(this,e),this.dispatch=void 0,this.getState=void 0,this.device=void 0,this.server=void 0,this.service=void 0,this.batteryService=void 0,this.authCharacteristic=void 0,this.batteryCharacteristic=void 0,this.currentProfileCharacteristic=void 0,this.temperatureCharacteristic=void 0,this.queue=new S.TaskQueue({autorun:!0,stoppable:!1}),this.initialize=function(e,n){t.dispatch=e,t.getState=n},this.initializeBle=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.device&&t.device.gatt){e.next=7;break}return e.next=3,u.a.awrap(navigator.bluetooth.requestDevice({filters:[{services:[C]},{services:[E]}],optionalServices:[k,w]}));case 3:if(t.device=e.sent,t.device&&t.device.gatt){e.next=6;break}throw new Error("Failed to retrieve GhostBLE device.");case 6:t.device.ongattserverdisconnected=function(e){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch(R("Failed to connect to Ghost MV1.  Retrying ..."));case 1:case"end":return e.stop()}}))};case 7:return t.dispatch(M()),e.next=10,u.a.awrap(t.device.gatt.connect());case 10:if(t.server=e.sent,t.server){e.next=13;break}throw new Error("Failed to retrieve BLE server.");case 13:return e.next=15,u.a.awrap(t.server.getPrimaryService(k));case 15:t.service=e.sent;case 16:case"end":return e.stop()}}))},this.pair=function(){var e;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.server&&t.server.connected){n.next=3;break}return n.next=3,u.a.awrap(t.initializeBle());case 3:return n.next=5,u.a.awrap(t.service.getCharacteristic(_.uuid));case 5:return t.authCharacteristic=n.sent,n.next=8,u.a.awrap(A(t.authCharacteristic));case 8:return(e=n.sent)!==t.getState().ble.authKey&&(localStorage.setItem("ghostmv1.auth",e),t.dispatch(W(e))),n.next=12,u.a.awrap(t.authCharacteristic.writeValue(P(e)));case 12:return n.next=14,u.a.awrap(t.connect());case 14:case"end":return n.stop()}}))},this.connect=function(){var e,n,r,a,c;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.server&&t.server.connected){s.next=3;break}return s.next=3,u.a.awrap(t.initializeBle());case 3:if(e=localStorage.getItem("ghostmv1.auth")){s.next=6;break}throw new Error("No paired device.");case 6:return s.next=8,u.a.awrap(t.service.getCharacteristic(_.uuid));case 8:return t.authCharacteristic=s.sent,s.next=11,u.a.awrap(t.authCharacteristic.writeValue(P(e)));case 11:return s.next=13,u.a.awrap(A(t.authCharacteristic));case 13:return n=s.sent,t.dispatch(W(n)),s.next=17,u.a.awrap(t.service.getCharacteristic(N.uuid));case 17:return t.currentProfileCharacteristic=s.sent,s.next=20,u.a.awrap(T(t.currentProfileCharacteristic));case 20:return r=s.sent,t.dispatch(Q(r)),t.currentProfileCharacteristic.addEventListener("characteristicvaluechanged",(function(e){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.getState().ble.updating){e.next=2;break}return e.abrupt("return");case 2:t.queue.enqueue((function(){var e;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(T(t.currentProfileCharacteristic));case 2:(e=n.sent)!==t.getState().ble.profile&&t.dispatch(Q(e));case 4:case"end":return n.stop()}}))}));case 3:case"end":return e.stop()}}))})),s.next=25,u.a.awrap(t.service.getCharacteristic(O.uuid));case 25:return t.temperatureCharacteristic=s.sent,s.next=28,u.a.awrap(U(t.temperatureCharacteristic));case 28:return a=s.sent,t.dispatch(X(a)),t.temperatureCharacteristic.addEventListener("characteristicvaluechanged",(function(e){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.getState().ble.updating){e.next=2;break}return e.abrupt("return");case 2:t.queue.enqueue((function(){var e,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.awrap(U(t.temperatureCharacteristic));case 2:e=r.sent,n=t.getState().ble.temperatures,(e.length!==n.length||e.filter((function(e,t){return e!==n[t]})).length>0)&&t.dispatch(X(e));case 5:case"end":return r.stop()}}))}));case 3:case"end":return e.stop()}}))})),s.next=33,u.a.awrap(t.server.getPrimaryService(w));case 33:return t.batteryService=s.sent,s.next=36,u.a.awrap(t.batteryService.getCharacteristic(g));case 36:return t.batteryCharacteristic=s.sent,s.next=39,u.a.awrap(T(t.batteryCharacteristic));case 39:return c=s.sent,t.dispatch(H(c)),s.next=43,u.a.awrap(t.startNotifications());case 43:case"end":return s.stop()}}))},this.disconnect=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.server||!t.server.connected){e.next=9;break}if(!t.authCharacteristic){e.next=4;break}return e.next=4,u.a.awrap(new Promise((function(e){t.authCharacteristic.removeEventListener("characteristicvaluechanged",(function(){e()}))})));case 4:if(!t.currentProfileCharacteristic){e.next=7;break}return e.next=7,u.a.awrap(new Promise((function(e){t.currentProfileCharacteristic.removeEventListener("characteristicvaluechanged",(function(){e()}))})));case 7:return e.next=9,u.a.awrap(t.server.disconnect());case 9:delete t.server;case 10:case"end":return e.stop()}}))},this.updateCurrentProfile=function(e){var n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.currentProfileCharacteristic){a.next=2;break}return a.abrupt("return");case 2:n=e.toString(16).padStart(2,"0"),r=P(n),t.queue.enqueue((function(){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(t.currentProfileCharacteristic.writeValue(r));case 3:n.next=9;break;case 5:return n.prev=5,n.t0=n.catch(0),n.next=9,u.a.awrap(t.updateCurrentProfile(e));case 9:case"end":return n.stop()}}),null,null,[[0,5]])}));case 5:case"end":return a.stop()}}))},this.updateTemperature=function(e,n){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.temperatureCharacteristic){r.next=2;break}return r.abrupt("return");case 2:t.queue.enqueue((function(){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u.a.awrap(B(t.temperatureCharacteristic,e));case 3:r.next=9;break;case 5:return r.prev=5,r.t0=r.catch(0),r.next=9,u.a.awrap(t.updateCurrentProfile(n));case 9:case"end":return r.stop()}}),null,null,[[0,5]])}));case 3:case"end":return r.stop()}}))},this.pauseNotifications=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(t.currentProfileCharacteristic.stopNotifications());case 2:return e.next=4,u.a.awrap(t.temperatureCharacteristic.stopNotifications());case 4:case"end":return e.stop()}}))},this.startNotifications=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(t.currentProfileCharacteristic.startNotifications());case 2:return e.next=4,u.a.awrap(t.temperatureCharacteristic.startNotifications());case 4:case"end":return e.stop()}}))}},F={connecting:!1,connected:!1,updating:!1,connectAttempts:0,authKey:localStorage.getItem("ghostmv1.auth")||"",battery:0,profile:0,temperatures:[0,0,0,0,0,0]},q=function(e,t){return function(n,r){return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u.a.awrap(V());case 3:return n(Y()),r.next=6,u.a.awrap(D.updateTemperature(e,t));case 6:r.next=11;break;case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return");case 11:return n(X(e)),r.next=14,u.a.awrap(I());case 14:setTimeout((function(){n(Z())}),500);case 15:case"end":return r.stop()}}),null,null,[[0,8]])}},I=function(){return function(e,t){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(D.startNotifications());case 2:case"end":return e.stop()}}))}},V=function(){return function(e,t){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(D.pauseNotifications());case 2:case"end":return e.stop()}}))}},K=Object(x.b)({name:"BLE",initialState:F,reducers:{startUpdate:function(e,t){return Object(v.a)({},e,{updating:!0})},completeUpdate:function(e,t){return Object(v.a)({},e,{updating:!1})},connectStart:function(e,t){return Object(v.a)({},e,{connecting:!0,connected:!1,error:void 0,connectAttempts:0})},connectSuccess:function(e,t){return Object(v.a)({},e,{connecting:!1,connected:!0,error:void 0,connectAttempts:0})},connectFailed:function(e,t){return Object(v.a)({},e,{connecting:!1,connected:!1,error:t.payload,connectAttempts:e.connectAttempts+1})},disconnected:function(e,t){return Object(v.a)({},e,{connecting:!1,connected:!1,error:void 0,connectAttempts:0})},setAuthKey:function(e,t){return Object(v.a)({},e,{authKey:t.payload})},setBatteryLevel:function(e,t){return Object(v.a)({},e,{battery:t.payload})},setCurrentProfileForce:function(e,t){return Object(v.a)({},e,{profile:t.payload})},setCurrentProfile:function(e,t){return e.updating?e:Object(v.a)({},e,{profile:t.payload})},setTemperatures:function(e,t){return Object(v.a)({},e,{temperatures:t.payload})},clearError:function(e,t){return Object(v.a)({},e,{error:void 0})}}}),z=K.actions,M=z.connectStart,G=z.connectSuccess,R=z.connectFailed,J=z.disconnected,W=z.setAuthKey,H=z.setBatteryLevel,Q=z.setCurrentProfile,$=z.setCurrentProfileForce,X=z.setTemperatures,Y=(z.clearError,z.startUpdate),Z=z.completeUpdate,ee=K.reducer,te=n(488),ne=["Low","Medium","High","F1","F2","Concentrates"],re=n(199).version,ae=function(){var e=Object(i.c)((function(e){return e.ble.temperatures})),t=Object(i.c)((function(e){return e.ble.profile})),n=Object(i.c)((function(e){return e.ble.updating})),c=Object(i.c)((function(e){return e.ble.battery})),s=Object(i.b)(),o=Object(r.useState)(0),l=Object(m.a)(o,2),p=l[0],f=l[1],b=Object(r.useState)(!1),v=Object(m.a)(b,2),x=v[0],j=v[1],w=Object(r.createRef)(),g=Object(r.useRef)(0),E=Object(r.useCallback)((function(n){var r=[].concat(Object(h.a)(e.slice(0,t-1)),[n],Object(h.a)(e.slice(t)));s(q(r,t))}),[e,t]);Object(r.useEffect)((function(){w&&w.current&&t!==p&&t>0&&(f(t),w.current.slideTo(t-1))}),[t]);return a.a.createElement(d.p,{className:"dashboard"},a.a.createElement(d.k,{class:"version-label"},re),a.a.createElement(d.g,{className:"dashboard-header"},a.a.createElement(d.y,{className:"dashboard-header-toolbar"},a.a.createElement("div",{slot:"start",className:"dashboard-header-toolbar-battery-icon"},a.a.createElement("svg",{width:42,height:18,className:"battery",key:"batteryIndicator_".concat(c)},a.a.createElement("rect",{width:34,height:14,stroke:"#CCC",strokeWidth:2,x:2,y:2,rx:2,ry:2,className:"battery-container"}),a.a.createElement("rect",{height:12,width:Math.round(c/100*32),x:3,y:3,rx:2,ry:2,className:"battery-gauge"}),a.a.createElement("rect",{width:4,height:8,x:36,y:6,className:"battery-button"}),a.a.createElement("text",{x:4,y:13,className:"battery-text"},c.toFixed(0),"%"))),a.a.createElement(d.i,{className:"dashboard-header-toolbar-logo",src:y.a}),a.a.createElement(d.h,{slot:"end"}))),a.a.createElement(d.f,{className:"dashboard-content"},a.a.createElement(d.m,{className:"dashboard-content-list",lines:"none"},a.a.createElement(d.n,{className:"dashboard-content-list-header"},a.a.createElement(d.k,null,"Temperature")),a.a.createElement(d.j,{className:"dashboard-content-list-item"},a.a.createElement(d.t,{options:{allowSlideNext:!n,allowSlidePrev:!n,initialSlide:t},pager:!0,ref:w,onIonSlideDidChange:function(e){w.current&&w.current.getActiveIndex().then((function(e){t!==e+1&&s(function(e){return function(t,n){return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(V());case 3:return t(Y()),n.next=6,u.a.awrap(D.updateCurrentProfile(e));case 6:n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return");case 11:return t($(e)),n.next=14,u.a.awrap(I());case 14:setTimeout((function(){t(Z())}),500);case 15:case"end":return n.stop()}}),null,null,[[0,8]])}}(e+1))}))}},e.map((function(e,t){return a.a.createElement(d.s,{key:t,title:t.toString()},a.a.createElement("div",{className:"swiper-slide-content"},a.a.createElement("div",{className:"swiper-slide-content-text",onClick:function(){return j(!0)}},e.toFixed(1),"\xb0C")),a.a.createElement("div",{className:"swiper-slide-footer"},a.a.createElement("div",{className:"swiper-slide-footer-text"},ne[t])))})))),a.a.createElement(d.j,{className:"dashboard-content-list-footer",hidden:4!==t&&5!==t},a.a.createElement(d.q,{min:100,max:220,step:1,value:t>0&&t<=6&&6===e.length?e[t-1]:0,snaps:!0,color:"danger",onIonChange:function(n){var r=n.detail.value,a=[].concat(Object(h.a)(e.slice(0,t-1)),[r],Object(h.a)(e.slice(t)));s(X(a)),setTimeout((function(){g.current===r&&s(q(a,t))}),1e3),g.current=r}},a.a.createElement(d.h,{slot:"start",size:"small",color:"danger",icon:te.a}),a.a.createElement(d.h,{slot:"end",color:"danger",icon:te.a}))),a.a.createElement(d.j,{className:"dashboard-content-list-footer",hidden:4===t||5===t},"\xa0"))),a.a.createElement(d.b,{isOpen:x,onDidDismiss:function(){return j(!1)},header:"New Temperature",inputs:[{name:"temperature",type:"number",label:"Temperature",placeholder:"<New Value>",value:t>=1&&t<=6?e[t-1]:0,min:100,max:220}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){var t=parseInt(e.temperature);t>=100&&t<=220&&E(t)}}]}))},ce=(n(397),function(){return a.a.createElement(d.p,null,a.a.createElement(d.g,null,a.a.createElement(d.y,null,a.a.createElement(d.x,null,"Lock my Ghost"))),a.a.createElement(d.f,null,a.a.createElement(d.m,{lines:"none"},a.a.createElement(d.n,null,a.a.createElement(d.k,null,"Lock my Ghost")))))}),se=(n(398),n(199).version),ie=function(e){var t=e.history,n=Object(r.useState)(!1),c=Object(m.a)(n,2),s=c[0],o=c[1],l=Object(r.useState)(!1),p=Object(m.a)(l,2),f=p[0],h=p[1],b=Object(i.c)((function(e){return{connected:e.ble.connected,error:e.ble.error,connectAttempts:e.ble.connectAttempts,connecting:e.ble.connecting,hasKey:""!==e.ble.authKey}})),v=Object(i.b)(),x=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1),v((function(e,t){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(D.pair());case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),e(R("An error occured establishing a connection to Ghost MV1 BLE device.")),t.abrupt("return");case 9:e(G());case 10:case"end":return t.stop()}}),null,null,[[0,5]])}));case 2:case"end":return e.stop()}}))},j=Object(r.useCallback)((function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:v((function(e,t){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.awrap(D.connect());case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:e(G());case 9:case"end":return t.stop()}}),null,null,[[0,5]])}));case 1:case"end":return e.stop()}}))}),[]);Object(r.useEffect)((function(){b.connectAttempts>0&&!f?j():b.connected&&!b.connecting&&t.push("/dashboard")}),[b.connectAttempts,f,b.connected,b.connecting,t,j]);return a.a.createElement(d.p,{className:"connect"},a.a.createElement(d.k,{class:"version-label"},se),a.a.createElement(d.g,{className:"connect-header"},a.a.createElement(d.y,{className:"connect-header-toolbar"},a.a.createElement(d.i,{className:"connect-header-toolbar-logo",src:y.a}))),a.a.createElement(d.f,{className:"connect-content"},a.a.createElement(d.m,{lines:"none",className:"connect-content-list"},a.a.createElement(d.n,{className:"connect-content-list-header"},a.a.createElement(d.k,null,"Connect")),a.a.createElement(d.j,{class:"connect-content-list-spacer"}),a.a.createElement(d.j,{className:"connect-content-list-button",hidden:b.hasKey||b.connecting||b.connected},a.a.createElement(d.d,{onClick:x,size:"large"},"Pair")),a.a.createElement(d.j,{className:"connect-content-list-button",hidden:b.connecting||b.connected||!b.hasKey},a.a.createElement(d.d,{onClick:s?x:j,size:"large"},s?"Pair":"Connect")),a.a.createElement(d.j,{className:"connect-content-list-options",hidden:b.connecting||b.connected||!b.hasKey},a.a.createElement(d.e,{defaultChecked:s,onIonChange:function(e){o(e.detail.checked)},slot:"start"}),a.a.createElement(d.k,null,"Pair device again?")),a.a.createElement(d.j,{class:"connect-content-list-spacer"}))),a.a.createElement(d.o,{isOpen:void 0!==b.error||b.connecting,message:b.error||"Connecting ...",backdropDismiss:!0,onDidDismiss:function(){h(!0),v((function(e,t){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(D.disconnect());case 2:e(J());case 3:case"end":return t.stop()}}))}))}}))},oe=function(){var e=Object(i.c)((function(e){return e.ble.connected})),t=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(D.disconnect());case 2:case"end":return e.stop()}}))};Object(r.useEffect)((function(){return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}}),[]);var n=function(){return a.a.createElement(l.a,{to:"/connect"})};return a.a.createElement(d.c,null,a.a.createElement(p.a,null,a.a.createElement(d.w,null,a.a.createElement(d.r,null,a.a.createElement(l.b,{path:"/connect",component:ie,exact:!0}),a.a.createElement(l.b,{path:"/dashboard",component:e?ae:n,exact:!0}),a.a.createElement(l.b,{path:"/lock",component:e?ce:n,exact:!0}),a.a.createElement(l.b,{path:"/",component:n,exact:!0})),a.a.createElement(d.u,{slot:"bottom"},a.a.createElement(d.v,{tab:"dashboard",href:"/dashboard",hidden:!e},a.a.createElement(d.h,{icon:f.a}),a.a.createElement(d.k,null,"Temperature"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=n(26),le=Object(ue.combineReducers)({ble:ee}),de=Object(x.a)({reducer:le,middleware:Object(h.a)(Object(x.c)())});D.initialize(de.dispatch,de.getState),s.a.render(a.a.createElement(i.a,{store:de},a.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},95:function(e,t,n){e.exports=n.p+"static/media/logo.eba00710.svg"}},[[226,9,10]]]);
//# sourceMappingURL=main.2d5c5e1d.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1002:function(e,t){},1005:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(26),s=n(17),i=n(14),c=n(29),o=n(5),l=n(6),p=n(8),u=n(7),d=n(9),E=n(1),m=n(3),f=n(13),S=n(19),h=(n(859),n(775)),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).checkSP=function(){setTimeout(function(){console.log("check sp: ".concat(n.state.sliderValue,", ").concat(n.state.startingValue,", ").concat(n.state.changing)),n.state.sliderValue===n.state.startingValue&&n.state.changing?(console.log("set sp: ".concat(n.state.sliderValue)),n.props.setSP(n.state.sliderValue),n.setState({changing:!1})):n.state.changing&&(n.setState({startingValue:n.state.sliderValue}),n.checkSP())}.bind(Object(S.a)(n)),500)},n.onSetPointBeginChange=function(e){var t=e.detail.value;n.props.state&&!n.state.changing&&t!==n.props.state.sp?(n.setState({changing:!0,startingValue:n.state.setPoint,sliderValue:t}),n.checkSP()):n.setState({sliderValue:t})},n.toggleState=function(){n.setState({running:!n.state.running,runningChanging:!0},function(){n.props.toggleState()})},n.runEndScript=function(){if(n.props.state){var e=n.state.scriptRunning;n.setState({scriptRunning:!e},function(){e?n.props.endScript():n.props.runScript()})}},n.scriptAfterChange=function(){(n.slider||n.state.scriptChanging)&&n.slider.getActiveIndex().then(function(e){n.state&&n.state.currentScript!==e?n.props.setScript(e):n.setState({scriptChanging:!1})})},n.setQuickTemp=function(e){n.props.setSP(e),n.setState({sliderValue:e,setPoint:e})},n.renderScriptItem=function(e){return r.createElement(E.l,{hidden:e.deleted},r.createElement(E.r,null,e.title),r.createElement(E.d,{slot:"end",onClick:n.runEndScript},r.createElement(E.j,{name:n.state.scriptRunning?"square":"play",style:{color:n.state.scriptRunning?"red":"unset"}})))},n.slider=void 0,n.getTimeRemaining=function(){if(!n.props.state)return"";var e=6e4*n.props.autoShutoff-(Date.now()-n.props.state.runningSince),t=Math.floor(e/1e3/60/60);return t>0?"".concat(t,":").concat(Object(h.format)(e,"mm:ss")):Object(h.format)(e,"m:ss")},n.state={changing:!1,sliderValue:n.props.state?n.props.state.sp:0,startingValue:n.props.state?n.props.state.sp:0,setPoint:n.props.state?n.props.state.sp:0,running:!!n.props.state&&n.props.state.running,scriptRunning:!!n.props.state&&n.props.state.scriptRunning,currentScript:n.props.state&&n.props.state.currentScript||0,scriptChanging:!0,showSPDialog:!1,runningChanging:!1,isMounted:!1,scripts:n.props.scripts},n.scriptAfterChange=n.scriptAfterChange.bind(Object(S.a)(n)),n.onSetPointBeginChange=n.onSetPointBeginChange.bind(Object(S.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this;try{if(this.slider&&!this.state.scriptChanging){var r=this.slider.getActiveIndex();void 0!==r&&r.then(function(e){n.slider&&e!==n.state.currentScript&&n.slider.slideTo(n.state.currentScript)})}this.slider&&this.props.scripts.length!==t.scripts.length&&this.slider.update()}catch(a){}}},{key:"componentWillUnmount",value:function(){console.log("will unmount"),this.setState({isMounted:!1})}},{key:"componentDidMount",value:function(){console.log("did mount"),this.setState({isMounted:!0})}},{key:"render",value:function(){var e=this;return r.createElement(E.g,{class:"home",scrollY:!1},r.createElement(E.r,{class:"version-label"},this.props.version),this.props.state?r.createElement(E.h,{class:"home-content"},r.createElement(E.z,{class:"home-content-header"},r.createElement(E.f,{size:"12"},r.createElement(E.i,null,r.createElement(E.K,null,"FC E-Nail")))),r.createElement(E.z,null,r.createElement(E.f,{size:"8",class:"home-content-temp"},r.createElement(E.z,null,r.createElement(E.r,null,this.props.state.pv)),r.createElement(E.z,{onClick:function(){e.setState({showSPDialog:!0})}},r.createElement(E.r,null,this.state.sliderValue))),r.createElement(E.f,{size:"4",class:"home-content-switch"},r.createElement(E.z,null,r.createElement(E.M,{color:"warning",onClick:this.toggleState,checked:this.state.running,disabled:void 0===this.props.state})),r.createElement(E.z,null,this.props.state.tuning?r.createElement(E.c,null,"TUNE"):"",this.props.state.running?r.createElement(E.c,null,this.getTimeRemaining()):""))),r.createElement(E.z,{class:"home-content-scripts"},r.createElement(E.f,null,this.state.isMounted&&this.state.scripts.length>0?r.createElement(E.G,Object.assign({numScripts:this.state.scripts.length},{pager:!0,ref:function(t){e.slider=t},options:{initialSlide:this.state.currentScript},onIonSlideDidChange:this.scriptAfterChange,onIonSlideTouchStart:function(){e.setState({scriptChanging:!0})},onIonSlidesDidLoad:function(t){t.target.slideTo(e.state.currentScript)}}),this.state.scripts.map(function(t){return e.state.isMounted?r.createElement(E.F,{key:t.key,hidden:t.deleted},e.renderScriptItem(t)):""})):"")),r.createElement(E.z,{class:"home-content-presets"},r.createElement(E.f,{class:"home-content-presets-col"},r.createElement(E.A,null,this.props.presets.map(function(t){return r.createElement(E.B,{key:"preset-button-".concat(t),onClick:function(){return e.setQuickTemp(t)},checked:e.state.sliderValue===t},t)})))),r.createElement(E.z,{class:"home-content-slider"},r.createElement(E.f,null,r.createElement(E.v,{class:"home-content-slider-range",onIonChange:this.onSetPointBeginChange,value:this.state.sliderValue,max:1e3,min:0,step:5})))):"",r.createElement(E.a,{isOpen:this.state.showSPDialog,onDidDismiss:function(){return e.setState(function(){return{showSPDialog:!1}})},header:"Change Set Point",message:"Please enter a new set point.",inputs:[{name:"setPoint",type:"number",value:this.state.sliderValue,placeholder:"Set Point"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(t){e.props.setSP(t.setPoint),setTimeout(function(){e.setState({changing:!1,sliderValue:t.setPoint,setPoint:t.setPoint})}.bind(e),500)}}]}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.state||e.scripts?e.scripts.length!==t.scripts.length?{currentScript:e.state?e.state.currentScript:0,scripts:[].concat(Object(f.a)(e.scripts),Object(f.a)(t.scripts.filter(function(t){return e.scripts.findIndex(function(e){return e.title===t.title})<0}).map(function(e){return Object(m.a)({},e,{deleted:!0})})))}:e.state?0===t.setPoint?{sliderValue:e.state.sp,startingValue:e.state.sp,setPoint:e.state.sp,running:e.state.running,scriptRunning:e.state.scriptRunning,currentScript:e.state.currentScript||t.currentScript}:e.state.sp===t.setPoint||t.changing?e.state&&void 0!==e.state.currentScript&&t.currentScript!==e.state.currentScript?{currentScript:e.state.currentScript,scriptChanging:!1}:e.state&&e.state.running!==t.running&&!t.runningChanging?{running:e.state.running}:e.state&&e.state.running===t.running&&t.runningChanging?{runningChanging:!1}:null:{setPoint:e.state.sp,sliderValue:e.state.sp}:null:null}}]),t}(r.Component),v=n(841),g=n(20),j=n.n(g),b=n(837),O=n(4),I=n(11),R="ENAIL/SERVICE/FOUND",T="ENAIL/SERVICE/RECONNECT",A="FCENAIL:SERVICEURL",N="loop",P="feedback",k="movetemp",C="waittemp",L="timer",D="sequential",w=[{title:"-None-",value:""},{title:"Home",value:"home"},{title:"Cloud",value:"cloud"},{title:"Drop",value:"drop"},{title:"Gear",value:"gear"},{title:"Script",value:"script"},{title:"Thermometer",value:"thermometerDown"}],x=[{title:"-None-",value:""},{title:"Appear",value:"appear"},{title:"Beep",value:"beep"},{title:"Bell",value:"bell"},{title:"Chime",value:"chime"},{title:"Complete",value:"complete"},{title:"Disconnected",value:"disconnected"},{title:"Error",value:"error"},{title:"Money",value:"money"},{title:"Organ",value:"organ"}],V=n(60);function U(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var z={serviceFound:!1,connected:!1,requesting:!1,reconnect:!1,tokenError:!1,presets:[],autoShutoff:45,token:"",profiles:{profiles:{}},theme:localStorage["FCENAIL:THEME"]||"dark"},q=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/script"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/SCRIPT/SAVE/REQUEST",{type:"ENAIL/SCRIPT/SAVE/RESPONSE",payload:e},"ENAIL/SCRIPT/SAVE/ERROR"],body:JSON.stringify(e)})},_=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/profile/delete"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:e}),types:[{type:"ENAIL/PROFILE/DELETE/REQUEST",payload:e},"ENAIL/PROFILE/DELETE/RESPONSE","ENAIL/PROFILE/DELETE/ERROR"]})},F=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/script/delete"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e}),types:[{type:"ENAIL/SCRIPT/DELETE/REQUEST",payload:e},"ENAIL/SCRIPT/DELETE/RESPONSE","ENAIL/SCRIPT/DELETE/ERROR"]})},M=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var r=Object(b.a)(j.a.mark(function r(a){var s;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=13;break}return r.prev=1,r.next=4,G(n);case 4:s=r.sent,a({type:R,payload:s}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),a(n?e(!1,!1):e(!0,!0));case 11:r.next=14;break;case 13:a({type:T,payload:t});case 14:case"end":return r.stop()}},r,null,[[1,8]])}));return function(e){return r.apply(this,arguments)}}()},Q=function(e){return function(t){fetch(e).then(function(n){200!==n.status?t(M(!1,!1)):t({type:R,payload:e})})}},K=function(){return localStorage.getItem(A)||""},G=function(e){return new Promise(function(t,n){var r=e?"":localStorage.getItem(A)||"";if(""===r){var a=setTimeout(function(){n()},5e3);V.a.watch("_fc-enail._tcp.","local.").subscribe(function(e){switch(e.action){case"resolved":clearTimeout(a);var r="http://".concat(e.service.ipv4Addresses[0],":").concat(e.service.port),s=setTimeout(function(){n()},5e3);fetch(r).then(function(e){clearTimeout(s),200!==e.status?n():t(r)}).catch(function(){n()}),V.a.unwatch("_fc-enail._tcp.","local.")}},function(){n()})}else{var s=setTimeout(function(){n()},5e3);fetch(r).then(function(e){clearTimeout(s),200!==e.status?n():t(r)}).catch(function(){n()})}})},H=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/sp/").concat(e),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/SETSP/REQUEST","ENAIL/SETSP/RESPONSE","ENAIL/SETSP/ERROR"]})},W=function(){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/state"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/TOGGLESTATE/REQUEST","ENAIL/TOGGLESTATE/RESPONSE","ENAIL/TOGGLESTATE/ERROR"]})},B=function(){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/autotune"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/AUTOTUNE/REQUEST","ENAIL/AUTOTUNE/RESPONSE","ENAIL/AUTOTUNE/ERROR"]})},J=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/savepid"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),types:["ENAIL/SAVEPID/REQUEST",{type:"ENAIL/SAVEPID/RESPONSE",payload:e},"ENAIL/SAVEPID/ERROR"]})},Y=function(){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/script/run"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/RUN_SCRIPT/REQUEST","ENAIL/RUN_SCRIPT/RESPONSE","ENAIL/RUN_SCRIPT/ERROR"]})},X=function(){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/script/end"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/END_SCRIPT/REQUEST","ENAIL/END_SCRIPT/RESPONSE","ENAIL/END_SCRIPT/ERROR"]})},$=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/script/set/").concat(e),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/SET_SCRIPT/REQUEST","ENAIL/SET_SCRIPT/RESPONSE","ENAIL/SET_SCRIPT/ERROR"]})},Z=function(){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/passphrase/generate"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/PASSPHRASE/GENERATE/REQUEST","ENAIL/PASSPHRASE/GENERATE/RESPONSE","ENAIL/PASSPHRASE/GENERATE/ERROR"]})},ee=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/passphrase/verify"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({passphrase:e}),types:["ENAIL/PASSPHRASE/VERIFY/REQUEST","ENAIL/PASSPHRASE/VERIFY/RESPONSE","ENAIL/PASSPHRASE/VERIFY/ERROR"]})},te=function(e){return Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/savedstate"),method:"POST",headers:{"Content-Type":"application/json"},types:["ENAIL/SAVED_STATE/PERSIST/REQUEST",{type:"ENAIL/SAVED_STATE/PERSIST/RESPONSE",meta:e},"ENAIL/SAVED_STATE/PERSIST/ERROR"],body:JSON.stringify(e)})},ne=function(e){return function(t){localStorage.setItem("FCENAIL:THEME",e),t({type:"ENAIL/THEME",payload:e})}};var re,ae=Object(i.b)(function(e,t){return{version:e.version.version,state:e.enail.emitState,scripts:e.enail.scripts||[],presets:e.enail.presets,autoShutoff:e.enail.autoShutoff}},function(e){return{setSP:function(t){return e(H(t))},toggleState:function(){return e(W())},runScript:function(){return e(Y())},endScript:function(){return e(X())},setScript:function(t){return e($(t))}}})(Object(s.e)(y)),se=function(e){var t=Object(m.a)({},e,{key:"",loopCount:0,next:e.steps&&e.steps.length>0?"0":void 0,parent:void 0,last:!0});return Object(m.a)({},t,{steps:void 0===t.steps?[]:t.steps.map(function(e,n){return function e(t,n,r,a){var s="".concat(""!==r.key?"".concat(r.key,"."):"").concat(n),i=Object(m.a)({},t,{key:s,parent:r.key,loopCount:r.type===N?r.count:0,last:void 0===r.steps||n>=r.steps.length-1});return i=Object(m.a)({},i,{next:ie(i,n,r,a)}),Object(m.a)({},i,{steps:void 0===t.steps?[]:t.steps.map(function(t,n){return e(t,n,i,a)})})}(e,n,t,t)})})},ie=function(e,t,n,r){if(void 0!==e.steps&&e.steps.length>0)return"".concat(""!==e.key?"".concat(e.key,".0"):"0");if(void 0!==n.steps){if(e.last||"parallel"===n.type){if(void 0===n||n.last)return;var a=n.key.split("."),s=parseInt(a[a.length-1]);return"".concat(""!==n.parent?"".concat(n.parent,"."):"").concat(s+1)}return"".concat(""!==n.key?"".concat(n.key,"."):"").concat(t+1)}};!function(e){e.DOWN="DOWN",e.UP="UP",e.UNDEFINED="UNDEFINED"}(re||(re={}));n(962);var ce=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).createNew=function(e){e.preventDefault();var t={title:"",step:se({type:D,steps:[]})};n.setState({menuVisible:!1,script:t})},n.submit=function(e){e.preventDefault()},n.deleteScript=function(e){e.preventDefault(),n.setState({confirmDeleteOpen:!!n.state.script})},n.saveScript=function(e){e.preventDefault(),n.setState({saveDialogOpen:!!n.state.script})},n.addStepStart=function(e){n.setState({menuVisible:!1,addStepDialogOpen:!0,currentStep:e.key})},n.addStepComplete=function(e){var t=n.getNewStep(e);n.setState({script:Object(m.a)({},n.state.script,{step:n.addStep(n.state.currentStep,n.state.script.step,t)})})},n.addStep=function(e,t,r){return Object(m.a)({},t,{steps:t.key===e?[].concat(Object(f.a)(t.steps),[Object(m.a)({},r,{key:"".concat(t.key).concat(""!==t.key?".":"").concat(t.steps.length)})]):t.steps.map(function(t){return n.addStep(e,t,r)})})},n.deleteStep=function(e,t){return Object(m.a)({},t,{steps:t.steps.filter(function(t){return t.key!==e}).map(function(t,r){return n.deleteStep(e,t)})})},n.reorder=function(e,t){if(n.state.script&&n.state.script.step.steps){var r=Object(m.a)({},n.state.script,{step:n.reorderStep(n.state.script.step,e,t.detail.from,t.detail.to)});n.setState({script:r})}t.stopPropagation(),t.detail.complete()},n.reorderStep=function(e,t,r,a){if(e.steps){if(e.key!==t)return Object(m.a)({},e,{steps:e.steps.map(function(e){return n.reorderStep(e,t,r,a)})});var s=e.steps.filter(function(e,t){return t!==r});return Object(m.a)({},e,{steps:[].concat(Object(f.a)(s.slice(0,a)),[e.steps[r]],Object(f.a)(s.slice(a)))})}return Object(m.a)({},e)},n.getStepByKey=function(e){return e.split(".").reduce(function(e,t){var n="".concat(e.key).concat(""!==e.key?".":"").concat(t);if(e.steps){var r=e.steps.find(function(e){return e.key===n});if(r)return r}return e},n.state.script.step)},n.renderStep=function(e){return r.createElement(E.n,{key:e.key,class:"scripts"},r.createElement(E.q,null,r.createElement(E.p,null,e.type===N||e.type===D?r.createElement(E.o,{onClick:function(){return n.addStepStart(e)}},"Add Step"):"",r.createElement(E.o,{color:"danger",onClick:function(){return n.setState({script:Object(m.a)({},n.state.script,{step:n.deleteStep(e.key,n.state.script.step)})})}},"Delete")),r.createElement(E.l,{class:"step-item"},r.createElement(E.j,{name:n.state.menuOpen.includes(e.key)?"arrow-dropdown":"arrow-dropright",slot:"start",onClick:function(){n.state.menuOpen.includes(e.key)?n.setState({menuOpen:[]}):n.setState({menuOpen:[e.key]})}}),r.createElement(E.r,null,n.getStepTitle(e)),r.createElement(E.w,{slot:"end"}))),n.state.menuOpen.includes(e.key)?n.getStepPanel(e):"",e.steps&&e.steps.length>0?r.createElement(E.l,null,r.createElement(E.x,{class:"step-item-steps",disabled:!1,onIonItemReorder:function(t){return n.reorder(e.key,t)}},e.steps.map(function(e){return n.renderStep(e)}))):"")},n.getNewStep=function(e){var t={type:e,steps:[]};switch(e){case N:return Object(m.a)({},t,{count:1});case k:return Object(m.a)({},t,{value:20});case L:return Object(m.a)({},t,{timeout:5});case C:return Object(m.a)({},t,{offset:0,direction:re.DOWN,timeout:90});default:return Object(m.a)({},t)}},n.setStepValue=function(e){n.setState({script:Object(m.a)({},n.state.script,{step:n.updateStepValue(n.state.script.step,e)})})},n.updateStepValue=function(e,t){var r=e.key===t.key?t:{};return Object(m.a)({},e,r,{steps:e.steps.map(function(e){return n.updateStepValue(e,t)})})},n.getStepPanel=function(e){switch(e.type){case N:var t=e;return r.createElement(E.l,{class:"step-panel"},r.createElement(E.r,{position:"fixed"},"Count ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:t.count.toString(),required:!0,placeholder:"# of Loops",onIonChange:function(e){var r=parseInt(e.detail.value);isNaN(r)||n.setStepValue(Object(m.a)({},t,{count:r}))}}));case L:var a=e;return r.createElement(E.l,{class:"step-panel"},r.createElement(E.r,{position:"fixed"},"Timeout ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:a.timeout.toString(),required:!0,placeholder:"Timeout in seconds",onIonChange:function(e){var t=parseInt(e.detail.value);isNaN(t)||n.setStepValue(Object(m.a)({},a,{timeout:t}))}}));case C:var s=e;return r.createElement(E.n,{class:"step-panel"},r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"Direction ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.C,{value:s.direction,placeholder:"Direction",onIonChange:function(e){var t=e.detail.value;[re.DOWN,re.UP].includes(t)&&n.setStepValue(Object(m.a)({},s,{direction:t}))}},r.createElement(E.D,{value:re.DOWN},"Down"),r.createElement(E.D,{value:re.UP},"Up"))),r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"Offset ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:s.offset.toString(),required:!0,placeholder:"Offset degrees",onIonChange:function(e){var t=parseInt(e.detail.value);isNaN(t)||n.setStepValue(Object(m.a)({},s,{offset:t}))}})),r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"Timeout ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:s.timeout.toString(),required:!0,placeholder:"Timeout in seconds",onIonChange:function(e){var t=parseInt(e.detail.value);isNaN(t)||n.setStepValue(Object(m.a)({},s,{timeout:t}))}})));case k:var i=e;return r.createElement(E.l,{class:"step-panel"},r.createElement(E.r,{position:"fixed"},"Change (+/-) ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:i.value.toString(),required:!0,placeholder:"Temperature change in \\xb0",onIonChange:function(e){var t=parseInt(e.detail.value);isNaN(t)||n.setStepValue(Object(m.a)({},i,{value:t}))}}));case P:var c=e;return r.createElement(E.n,{class:"step-panel"},r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"Icon ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.C,{value:c.icon||"",placeholder:"Icon",onIonChange:function(e){var t=e.detail.value;w.findIndex(function(e){return e.value===t})<0||n.setStepValue(Object(m.a)({},c,{icon:t}))}},w.map(function(e){return r.createElement(E.D,{key:e.value,value:e.value},e.title)}))),r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"Flash (s) ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:(c.flashRate||0).toString(),required:!0,placeholder:"Icon flash rate",onIonChange:function(e){var t=parseInt(e.detail.value);isNaN(t)||n.setStepValue(Object(m.a)({},c,{flashRate:t}))}})),r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"Sound ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.C,{value:c.sound||"",placeholder:"Icon",onIonChange:function(e){var t=e.detail.value;x.findIndex(function(e){return e.value===t})<0||n.setStepValue(Object(m.a)({},c,{sound:t}))}},x.map(function(e){return r.createElement(E.D,{key:e.value,value:e.value},e.title)}))),r.createElement(E.l,{class:"step-panel-item"},r.createElement(E.r,{position:"fixed"},"LED (s) ",r.createElement(E.K,{color:"danger"},"*")),r.createElement(E.k,{type:"number",value:(c.led||0).toString(),required:!0,placeholder:"LED flash rate",onIonChange:function(e){var t=parseInt(e.detail.value);isNaN(t)||n.setStepValue(Object(m.a)({},c,{led:t}))}})));default:return""}},n.getStepTitle=function(e){switch(e.type){case N:return"Loop Step (".concat(e.count,")");case P:return"Feedback Step";case k:return"Move Temperature Step (".concat(e.value,")");case D:return"Sequential Step";case L:return"Timer Step (".concat(e.timeout,"s)");case C:return"Wait for Set Point";default:return"Invalid Step"}},n.state={script:n.props.script?Object(m.a)({},n.props.script):void 0,changed:!1,saved:!1,menuOpen:[],menuVisible:!1,confirmDeleteOpen:!1,saveDialogOpen:!1,addStepDialogOpen:!1,currentStep:""},n.deleteScript=n.deleteScript.bind(Object(S.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(E.i,null,r.createElement(E.N,null,r.createElement(E.e,{slot:"start"},r.createElement(E.d,{onClick:function(){e.setState({menuVisible:!0})}},r.createElement(E.j,{slot:"icon-only",name:"menu"}))),r.createElement(E.L,null,this.state.script?this.state.script.title||"-New-":"Scripts"))),r.createElement(E.g,null,this.state.script&&this.state.script.step.steps?r.createElement(E.x,{disabled:!1,onIonItemReorder:function(t){return e.reorder("",t)}},this.state.script.step.steps.map(function(t){return e.renderStep(t)})):""),r.createElement(E.a,{isOpen:this.state.confirmDeleteOpen,onDidDismiss:function(){return e.setState({confirmDeleteOpen:!1})},header:"Delete Script?",message:"Are you sure you want to delete this script?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(){e.props.deleteScript(e.state.script.key||e.state.script.title),e.setState({menuVisible:!1},function(){setTimeout(function(){e.props.history.push("/home")}.bind(e),500)})}}]}),r.createElement(E.a,{isOpen:this.state.saveDialogOpen,onDidDismiss:function(){return e.setState({saveDialogOpen:!1})},header:"Save Script?",message:"Please enter the script title.",inputs:[{name:"title",type:"text",value:this.state.script?this.state.script.title:"",placeholder:"Script Title"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(t){e.props.saveScript(Object(m.a)({},e.state.script,{title:t.title})),setTimeout(function(){e.setState({menuVisible:!1,script:Object(m.a)({},e.state.script,{title:t.title})})}.bind(e),500)}}]}),r.createElement(E.a,{isOpen:this.state.addStepDialogOpen,onDidDismiss:function(){return e.setState({addStepDialogOpen:!1})},header:"Add Step?",message:"Please select a new step type.",inputs:[{name:"stepType",type:"radio",label:"Loop",value:N},{name:"stepType",type:"radio",label:"Feedback",value:P},{name:"stepType",type:"radio",label:"Move Temperature",value:k},{name:"stepType",type:"radio",label:"Timer",value:L},{name:"stepType",type:"radio",label:"Wait for Set Point",value:C}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(t){e.addStepComplete(t),e.setState({menuVisible:!1})}}]}),r.createElement(E.u,{isOpen:this.state.menuVisible,onDidDismiss:function(){return e.setState(function(){return{menuVisible:!1}})}},r.createElement(E.s,null,r.createElement(E.l,{onClick:function(){return e.addStepStart(e.state.script.step)}},r.createElement(E.j,{name:"add",slot:"start"}),r.createElement(E.r,null,"Add Step")),r.createElement(E.l,{onClick:this.createNew},r.createElement(E.j,{name:"code",slot:"start"}),r.createElement(E.r,null,"New Script")),r.createElement(E.l,{onClick:this.saveScript},r.createElement(E.j,{name:"save",slot:"start"}),r.createElement(E.r,null,"Save Script")),r.createElement(E.l,{onClick:this.deleteScript},r.createElement(E.j,{name:"trash",slot:"start"}),r.createElement(E.r,null,"Delete Script")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!t.script&&e.script||t.script&&e.script&&t.script.title!==e.script.title&&""!==t.script.title?{script:Object(m.a)({},e.script),menuOpen:[]}:null}}]),t}(r.Component);var oe=Object(i.b)(function(e,t){var n=e.enail.emitState&&e.enail.scripts&&void 0!==e.enail.emitState.currentScript?e.enail.scripts[e.enail.emitState.currentScript]:void 0;return{version:e.version.version,script:n}},function(e){return{saveScript:function(t){return e(q(t))},deleteScript:function(t){return e(F(t))},setScript:function(t){return e($(t))}}})(Object(s.e)(ce)),le=(n(963),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).submit=function(e){e.preventDefault(),n.props.persistSavedState({presets:n.props.presets.map(function(e,t){return n.state.presets[t]?n.state.presets[t].value:e}),autoShutoff:n.state.autoShutoff}),setTimeout(function(){n.setState({dirty:!1},function(){n.props.history.push("/home")})}.bind(Object(S.a)(n)),500)},n.state={presets:{},autoShutoff:n.props.autoShutoff,dirty:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(E.g,null,r.createElement(E.n,{class:"settings"},r.createElement(E.m,null,r.createElement(E.r,null,"Presets")),this.props.presets.map(function(t,n){return r.createElement(E.l,null,r.createElement(E.r,{position:"fixed"},"Preset #",n+1),r.createElement(E.k,{type:"number",value:void 0!==e.state.presets[n]?0===e.state.presets[n].value?"":e.state.presets[n].value.toString():t.toString(),required:!0,placeholder:"Preset #".concat(n+1),onIonChange:function(t){var r=parseInt(t.detail.value||"0");isNaN(r)||e.setState({presets:Object(m.a)({},e.state.presets,Object(O.a)({},n,{value:r,validationStatus:"success",errorMsg:""})),dirty:!0})}}))}),r.createElement(E.m,null,r.createElement(E.r,null,"Auto Shutoff")),r.createElement(E.l,null,r.createElement(E.r,{position:"fixed"},"# of Minutes"),r.createElement(E.k,{type:"number",value:0===this.state.autoShutoff?"":this.state.autoShutoff.toString(),required:!0,placeholder:"minutes",onIonChange:function(t){var n=parseInt(t.detail.value||"0");isNaN(n)||e.setState({autoShutoff:n,dirty:!0})}})),r.createElement(E.m,null,r.createElement(E.r,null,"Theme")),r.createElement(E.l,{class:"theme"},r.createElement(E.r,{position:"fixed"},"Current"),r.createElement(E.C,{onIonChange:function(t){return e.props.setTheme(t.detail.value)},value:this.props.theme},r.createElement(E.E,null,r.createElement(E.D,{key:"dark",value:"dark"},"Dark"),r.createElement(E.D,{key:"ionic",value:"ionic"},"Ionic"))))),r.createElement(E.l,{class:"settings"},r.createElement(E.d,{type:"submit",size:"default",disabled:!this.state.dirty,onClick:this.submit},"Save")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.autoShutoff===t.autoShutoff||t.dirty?null:{autoShutoff:e.autoShutoff}}}]),t}(r.Component));var pe=Object(i.b)(function(e,t){return{version:e.version.version,state:e.enail.emitState,presets:e.enail.presets,autoShutoff:e.enail.autoShutoff,theme:e.enail.theme}},function(e){return{persistSavedState:function(t){return e(te(t))},setTheme:function(t){return e(ne(t))}}})(Object(s.e)(le)),ue=n(838),de=n.n(ue),Ee=(n(966),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).savePidSettings=function(e){e.preventDefault(),n.setState({saveDialogOpen:!0})},n.state={p:n.props.p,i:n.props.i,d:n.props.d,start:{p:n.props.p,i:n.props.i,d:n.props.d,profile:n.props.profile},profile:n.props.profile,dirty:!1,saveDialogOpen:!1,deleteDialogOpen:!1,tuning:n.props.tuning},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(E.g,null,r.createElement(E.n,{class:"profiles"},r.createElement(E.m,null,r.createElement(E.r,null,"Current Profile")),r.createElement(E.l,{class:"profiles-current"},r.createElement(E.C,{value:this.state.profile,style:this.props.profile!==this.state.profile?{color:"var(--ion-color-danger)"}:{},disabled:this.state.tuning,onIonChange:function(t){var n=e.props.profiles[t.detail.value];n&&e.setState({profile:n.key,p:n.p,i:n.i,d:n.d})}},this.props.profiles?Object.keys(this.props.profiles).map(function(t){var n=e.props.profiles[t];return r.createElement(E.D,{key:n.key,value:n.key},n.title)}):"")),r.createElement(E.m,null,r.createElement(E.r,null,"Profile Settings")),r.createElement(E.l,null,r.createElement(E.r,{slot:"start"},"Proportional Band"),r.createElement(E.k,{type:"number",value:this.state.p.toString(),required:!0,placeholder:"P",disabled:this.state.tuning,onIonChange:function(t){var n=parseInt(t.detail.value||"0");isNaN(n)||e.state.p!==n&&e.setState({p:n,dirty:!0})}})),r.createElement(E.l,null,r.createElement(E.r,{slot:"start"},"Integral Time"),r.createElement(E.k,{type:"number",value:this.state.i.toString(),required:!0,placeholder:"I",disabled:this.state.tuning,onIonChange:function(t){var n=parseInt(t.detail.value||"0");isNaN(n)||e.state.i!==n&&e.setState({i:n,dirty:!0})}})),r.createElement(E.l,null,r.createElement(E.r,{slot:"start"},"Derivative Time"),r.createElement(E.k,{type:"number",value:this.state.d.toString(),required:!0,placeholder:"D",disabled:this.state.tuning,onIonChange:function(t){var n=parseInt(t.detail.value||"0");isNaN(n)||e.state.d!==n&&e.setState({d:n,dirty:!0})}}))),r.createElement(E.l,{class:"profiles"},r.createElement("div",{className:"profiles-buttons"},r.createElement(E.d,{type:"submit",size:"default",disabled:this.state.tuning||""!==this.state.profile&&!this.state.dirty&&this.props.profile===this.state.profile,onClick:this.savePidSettings},"Save"),r.createElement(E.d,{type:"button",size:"default",disabled:this.state.tuning,onClick:function(){return e.setState({deleteDialogOpen:!0})}},"Delete"),r.createElement(E.d,{type:"button",size:"default",disabled:this.state.tuning,onClick:function(){return e.setState({profile:""})}},"New"),r.createElement(E.d,{type:"button",size:"default",disabled:this.state.tuning!==this.props.tuning,onClick:function(){e.setState({tuning:!e.props.tuning},function(){e.props.toggleTuning()})}},this.state.tuning?"Cancel Tuning":"Auto-Tune")))),r.createElement(E.a,{isOpen:this.state.saveDialogOpen,onDidDismiss:function(){return e.setState({saveDialogOpen:!1})},header:"Save Profile?",message:"Please enter the profile title.",inputs:[{name:"title",type:"text",value:this.state.profile&&this.props.profiles[this.state.profile]?this.props.profiles[this.state.profile].title:"",placeholder:"Profile Title"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(t){e.props.savePidSettings({key:""===e.state.profile?de()().toUpperCase():e.state.profile,title:t.title,p:e.state.p,i:e.state.i,d:e.state.d})}}]}),r.createElement(E.a,{isOpen:this.state.deleteDialogOpen,onDidDismiss:function(){return e.setState({deleteDialogOpen:!1})},header:"Delete Profile?",message:"Are you sure you want to delete this profile?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(){e.props.deleteProfile(e.state.profile),e.setState({start:{p:e.state.p,i:e.state.i,d:e.state.d,profile:e.props.profile},profile:e.props.profile})}}]}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.p!==t.start.p&&(n=Object(m.a)({},n,{p:e.p,start:Object(m.a)({},t.start,{p:e.p})})),e.i!==t.start.i&&(n=Object(m.a)({},n,{i:e.i,start:Object(m.a)({},t.start,{i:e.i})})),e.d!==t.start.d&&(n=Object(m.a)({},n,{d:e.d,start:Object(m.a)({},t.start,{d:e.d})})),e.profile!==t.start.profile&&(n=Object(m.a)({},n,{profile:e.profile||"",start:Object(m.a)({},t.start,{profile:e.profile})})),e.tuning!==t.tuning&&(n=e.tuning?{tuning:e.tuning}:{tuning:e.tuning,profile:"",dirtry:!0}),n==={}?null:n}}]),t}(r.Component));var me=Object(i.b)(function(e,t){return{p:e.enail.emitState?e.enail.emitState.p:0,i:e.enail.emitState?e.enail.emitState.i:0,d:e.enail.emitState?e.enail.emitState.d:0,profile:e.enail.emitState?e.enail.emitState.profile||"":e.enail.profiles.currentProfile||"",profiles:e.enail.profiles.profiles,tuning:!!e.enail.emitState&&e.enail.emitState.tuning}},function(e){return{toggleTuning:function(){return e(B())},savePidSettings:function(t){return e(J(t))},deleteProfile:function(t){return e(_(t))}}})(Object(s.e)(Ee)),fe=(n(967),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).state={menuVisible:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(E.i,null,r.createElement(E.N,null,r.createElement(E.e,{slot:"start"},r.createElement(E.d,{onClick:function(){e.setState({menuVisible:!0})}},r.createElement(E.j,{slot:"icon-only",name:"menu"}))),r.createElement(E.L,null,this.props.location.pathname.indexOf("profiles")>=0?"Profiles":"Settings"))),r.createElement(s.c,null,r.createElement(s.a,{path:"/settings/profiles",component:me}),r.createElement(s.a,{path:"/settings",component:pe})),r.createElement(E.u,{isOpen:this.state.menuVisible,onDidDismiss:function(){return e.setState({menuVisible:!1})}},r.createElement(E.s,null,r.createElement(E.l,{onClick:function(t){t.preventDefault(),e.props.history.push("/settings"),e.setState({menuVisible:!1})}},r.createElement(E.j,{name:"settings",slot:"start"}),r.createElement(E.r,null,"Settings")),r.createElement(E.l,{onClick:function(t){t.preventDefault(),e.props.history.push("/settings/profiles"),e.setState({menuVisible:!1})}},r.createElement(E.j,{name:"options",slot:"start"}),r.createElement(E.r,null,"Profiles")))))}}]),t}(r.Component));var Se=Object(i.b)(function(e,t){return{}},function(e){return{}})(Object(s.e)(fe)),he=n(968),ye=(n(969),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).submit=function(e){e.preventDefault(),n.props.connectManual(n.state.serviceUrl)},n.handleInputChange=function(e){if(e.target){var t=e.target;n.setState({serviceUrl:t.value})}},n.state={serviceUrl:localStorage.getItem(A)||he.serviceUrl},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.createElement(E.g,{class:"reconnect",scrollY:!1},r.createElement("form",{onSubmit:this.submit},r.createElement(E.r,{class:"version-label"},this.props.version),r.createElement(E.i,{class:"reconnect-header"},r.createElement(E.K,null,"FC E-Nail")),r.createElement(E.h,{class:"reconnect-content"},r.createElement(E.z,{class:"reconnect-content-datarow"},r.createElement(E.f,null,r.createElement(E.r,{class:"reconnect-content-datarow-label"},"Please enter the service URL."),r.createElement(E.k,{class:"reconnect-content-datarow-input",type:"url",autoCorrect:"off",name:"serviceUrl",placeholder:"http://<IP Address>",onInput:this.handleInputChange,value:this.state.serviceUrl,required:!0,autofocus:!0}))),r.createElement(E.z,{class:"reconnect-content-buttonrow"},r.createElement(E.f,null,r.createElement(E.d,{type:"submit"},"Submit"))))))}}]),t}(r.Component));var ve=Object(i.b)(function(e,t){return{version:e.version.version}},function(e){return{connectManual:function(t){return e(Q(t))}}})(Object(s.e)(ye)),ge=(n(970),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).submit=function(e){e.preventDefault(),n.props.ready&&n.props.verifyPassphrase(n.state.passphrase)},n.handleInputChange=function(e){if(e.target){var t=e.target;n.setState({passphrase:t.value})}},n.state={passphrase:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.createElement(E.g,{class:"signin",scrollY:!1},r.createElement("form",{onSubmit:this.submit},r.createElement(E.r,{class:"version-label"},this.props.version),r.createElement(E.i,{class:"signin-header"},r.createElement(E.K,null,"FC E-Nail")),r.createElement(E.h,{class:"signin-content"},r.createElement(E.z,{class:"signin-content-datarow"},r.createElement(E.f,null,r.createElement(E.r,{class:"signin-content-datarow-label",color:this.props.tokenError?"danger":""},this.props.tokenError?"Failed to verify the token.  Please try again.":"Please enter the passphrase from the E-Nail."),r.createElement(E.k,{class:"signin-content-datarow-input",type:"text",autoCorrect:"off",name:"passphrase",placeholder:"passphrase",onInput:this.handleInputChange,required:!0,title:"Passphrase did not match that on the e-nail.",autofocus:!0}))),r.createElement(E.z,{class:"signin-content-buttonrow"},r.createElement(E.f,null,r.createElement(E.d,{type:"submit",disabled:!this.props.ready},"Submit"))))))}}]),t}(r.Component));var je=Object(i.b)(function(e,t){return{version:e.version.version,tokenError:e.enail.tokenError,ready:!e.enail.requesting}},function(e){return{verifyPassphrase:function(t){return e(ee(t))}}})(Object(s.e)(ge)),be=(n(971),function(e){function t(e){var n;return Object(o.a)(this,t),"/"===(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).props.location.pathname&&n.props.history.push("/home"),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.createElement(E.b,{class:"app"},r.createElement("link",{rel:"stylesheet",type:"text/css",href:"./themes/theme.".concat(this.props.theme,".css")}),r.createElement(E.t,{className:"app-page"},r.createElement(E.J,null,r.createElement(E.y,null,r.createElement(s.a,{path:"/:tab(home)",component:ae,exact:!0}),r.createElement(s.a,{path:"/:tab(scripts)",component:oe,exact:!0}),r.createElement(s.a,{path:"/:tab(settings)",component:Se}),r.createElement(s.a,{path:"/connect",component:ve}),r.createElement(s.a,{path:"/signin",component:je})),r.createElement(E.H,{slot:"bottom",class:"app-page-tabbar"},r.createElement(E.I,{tab:"home",href:"/home"},r.createElement(E.r,null,"Home"),r.createElement(E.j,{name:"home"})),r.createElement(E.I,{tab:"scripts",href:"/scripts"},r.createElement(E.r,null,"Scripts"),r.createElement(E.j,{name:"code"})),r.createElement(E.I,{tab:"settings",href:"/settings"},r.createElement(E.r,null,"Settings"),r.createElement(E.j,{name:"settings"}))))))}}]),t}(r.Component));Object(s.e)(be);var Oe=Object(i.b)(function(e,t){return{theme:e.enail.theme}},function(e){return{}})(Object(s.e)(be)),Ie=(n(972),n(973),n(974),n(25)),Re=Object(Ie.a)(),Te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ae(){if("serviceWorker"in navigator){if(new URL("https://www.jcatvapes.com/fcenail",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("https://www.jcatvapes.com/fcenail","/service-worker.js");Te?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ne(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ne(e)})}}function Ne(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Pe=n(27),ke=n(975),Ce=Object(Pe.c)({enail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENAIL/THEME":return Object(m.a)({},e,{theme:t.payload});case"ENAIL/SOCKET/CONNECTED":return Object(m.a)({},e,{connected:!0});case"ENAIL/SOCKET/DISCONNECTED":return Object(m.a)({},e,{connected:!1});case"ENAIL/EMIT/STATE":return Object(m.a)({},e,{emitState:t.payload});case"ENAIL/SETSP/REQUEST":case"ENAIL/TOGGLESTATE/REQUEST":case"ENAIL/RUN_SCRIPT/REQUEST":case"ENAIL/END_SCRIPT/REQUEST":case"ENAIL/SET_SCRIPT/REQUEST":case"ENAIL/SAVED_STATE/LOAD/REQUEST":case"ENAIL/SAVED_STATE/PERSIST/REQUEST":case"ENAIL/PASSPHRASE/GENERATE/REQUEST":case"ENAIL/PASSPHRASE/VERIFY/REQUEST":case"ENAIL/AUTOTUNE/REQUEST":case"ENAIL/SAVEPID/REQUEST":case"ENAIL/PROFILES/ERROR":case"ENAIL/PROFILES/REQUEST":case"ENAIL/SCRIPTS/REQUEST":case"ENAIL/SCRIPT/SAVE/REQUEST":return Object(m.a)({},e,{requesting:!0,error:!1});case"ENAIL/SETSP/RESPONSE":case"ENAIL/TOGGLESTATE/RESPONSE":case"ENAIL/RUN_SCRIPT/RESPONSE":case"ENAIL/RUN_SCRIPT/RESPONSE":case"ENAIL/SET_SCRIPT/RESPONSE":case"ENAIL/PASSPHRASE/GENERATE/RESPONSE":case"ENAIL/AUTOTUNE/RESPONSE":case"ENAIL/PROFILE/DELETE/RESPONSE":return Object(m.a)({},e,{requesting:!1,error:!1});case"ENAIL/SCRIPTS/ERROR":case"ENAIL/SETSP/ERROR":case"ENAIL/TOGGLESTATE/ERROR":case"ENAIL/RUN_SCRIPT/ERROR":case"ENAIL/END_SCRIPT/ERROR":case"ENAIL/SET_SCRIPT/ERROR":case"ENAIL/SAVED_STATE/PERSIST/ERROR":case"ENAIL/PASSPHRASE/GENERATE/ERROR":case"ENAIL/PASSPHRASE/VERIFY/ERROR":case"ENAIL/AUTOTUNE/ERROR":case"ENAIL/SAVEPID/ERROR":case"ENAIL/PROFILE/DELETE/ERROR":case"ENAIL/SCRIPT/SAVE/ERROR":return Object(m.a)({},e,{requesting:!1,error:!0,message:t.payload?t.payload.message:void 0});case"ENAIL/SCRIPTS/RESPONSE":return Object(m.a)({},e,{requesting:!1,error:!1,scripts:t.payload});case"ENAIL/SAVEPID/RESPONSE":var n=t.payload;return Object(m.a)({},e,{requesting:!1,error:!1,profiles:{currentProfile:n.title,profiles:Object(m.a)({},e.profiles.profiles,Object(O.a)({},n.title,n))}});case"ENAIL/PROFILES/RESPONSE":var r=t.payload;return r?Object(m.a)({},e,{requesting:!1,error:!1,profiles:{currentProfile:r.currentProfile,profiles:Object(m.a)({},r.profiles)}}):e;case"ENAIL/PROFILE/DELETE/REQUEST":if(!e.profiles)return e;var a=t.payload,s=e.profiles.profiles,i=(s[a],Object(v.a)(s,[a].map(U)));return Object(m.a)({},e,{profiles:{currentProfile:e.profiles.currentProfile?e.profiles.currentProfile===a?void 0:e.profiles.currentProfile:void 0,profiles:Object(m.a)({},i)}});case"ENAIL/SCRIPT/DELETE/REQUEST":if(!e.scripts)return e;var c=t.payload,o=e.scripts.findIndex(function(e){return e.key===c});return o<0?e:Object(m.a)({},e,{emitState:Object(m.a)({},e.emitState,{currentScript:0}),scripts:[].concat(Object(f.a)(e.scripts.slice(0,o)),Object(f.a)(o<e.scripts.length?e.scripts.slice(o+1).map(function(e){return Object(m.a)({},e,{index:e.index-1})}):[]))});case"ENAIL/SAVED_STATE/PERSIST/RESPONSE":return Object(m.a)({},e,{requesting:!1,error:!1,presets:t.meta.presets,autoShutoff:t.meta.autoShutoff});case"ENAIL/SCRIPT/SAVE/RESPONSE":var l=t.payload;if(!e.scripts)return Object(m.a)({},e,{scripts:[Object(m.a)({},l,{index:0})],emitState:Object(m.a)({},e.emitState,{currentScript:0})});var p=e.scripts.findIndex(function(e){return e.key===l.key});return Object(m.a)({},e,{requesting:!1,error:!1,scripts:p>=0?[].concat(Object(f.a)(e.scripts.slice(0,p)),[l],Object(f.a)(e.scripts.slice(p+1))).map(function(e,t){return Object(m.a)({},e,{index:t})}):[].concat(Object(f.a)(e.scripts),[Object(m.a)({},l,{index:e.scripts.length})]),emitState:Object(m.a)({},e.emitState,{currentScript:p>=0?p:e.scripts.length})});case"ENAIL/PASSPHRASE/VERIFY/RESPONSE":return Object(m.a)({},e,{requesting:!1,error:!1,tokenError:!t.payload.success,token:t.payload.token});case"ENAIL/TOKEN/LOAD":return Object(m.a)({},e,{token:t.payload});case"ENAIL/SAVED_STATE/LOAD/RESPONSE":return Object(m.a)({},e,{requesting:!1,error:!1,presets:t.payload.presets,autoShutoff:t.payload.autoShutoff});case"ENAIL/SAVED_STATE/LOAD/ERROR":return Object(m.a)({},e,{requesting:!1,error:!0,message:t.payload?t.payload.message:void 0,presets:[],autoShutoff:45});case R:return Object(m.a)({},e,{serviceFound:!0,reconnect:!1});case T:return Object(m.a)({},e,{reconnect:!0});case"ENAIL/STEP/MOVE":return Object(m.a)({},e);default:return e}},version:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{version:ke.version},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENAIL/VERSION/UPDATE":return Object(m.a)({},e,{version:t.payload});default:return e}}}),Le=n(839),De=n(840),we=n.n(De),xe=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case"ENAIL/SOCKET/CONNECT":var a=we()(localStorage.getItem(A),{query:"token="+e.getState().enail.token});a.connect(),a.on("connect",function(){e.dispatch({type:"ENAIL/SOCKET/CONNECTED"})}),a.on("disconnect",function(){e.dispatch({type:"ENAIL/SOCKET/DISCONNECTED"})}),a.on("ENAIL/EMIT/STATE",function(t){e.dispatch(function(e){return{type:"ENAIL/EMIT/STATE",payload:e}}(t))});break;case T:Re.push("connect");break;case R:localStorage.setItem(A,n.payload);var s=localStorage.getItem("FCENAIL:AUTH");s?e.dispatch({type:"ENAIL/TOKEN/LOAD",payload:s}):(e.dispatch(Z()),Re.push("signin"));break;case"ENAIL/PASSPHRASE/VERIFY/RESPONSE":var i=n.payload;i.success&&(localStorage.setItem("FCENAIL:AUTH",i.token),e.dispatch({type:"ENAIL/TOKEN/LOADED"}));break;case"ENAIL/TOKEN/LOAD":e.dispatch({type:"ENAIL/TOKEN/LOADED"});break;case"ENAIL/TOKEN/LOADED":e.dispatch(Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/scripts"),method:"GET",headers:{"Content-Type":"application/json"},types:["ENAIL/SCRIPTS/REQUEST","ENAIL/SCRIPTS/RESPONSE","ENAIL/SCRIPTS/ERROR"]})),e.dispatch(Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/profiles"),method:"GET",headers:{"Content-Type":"application/json"},types:["ENAIL/PROFILES/REQUEST","ENAIL/PROFILES/RESPONSE","ENAIL/PROFILES/ERROR"]})),e.dispatch(Object(O.a)({},I.RSAA,{endpoint:"".concat(K(),"/savedstate"),method:"GET",headers:{"Content-Type":"application/json"},types:["ENAIL/SAVED_STATE/LOAD/REQUEST","ENAIL/SAVED_STATE/LOAD/RESPONSE","ENAIL/SAVED_STATE/LOAD/ERROR"]})),e.dispatch({type:"ENAIL/SOCKET/CONNECT"});break;case"ENAIL/SOCKET/CONNECTED":Re.push("home")}return r}}},Ve=function(e){return function(t){return function(n){var r=n[I.RSAA]||null;if(r){var a=e.getState().enail.token;a&&(r.headers=Object(m.a)({},r.headers,{authorization:a,"Content-Type":"application/json"}))}return t(n)}}},Ue=function(e){return function(t){return function(n){if(n.type.endsWith("/ERROR")){var r=n.payload;r&&r.status&&"number"===typeof r.status&&401===r.status&&(e.dispatch(Z()),Re.push("signin"))}return t(n)}}};var ze=function(){var e=function(e){var t=[Le.a,Ve,I.apiMiddleware,Ue,xe],n="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pe.d,r=e||{},a=Object(Pe.e)(Ce,r,n(Pe.a.apply(void 0,t)));return a.dispatch(M(!0,!1)),a}(window.__INITIAL_STATE__);a.render(r.createElement(i.a,{store:e},r.createElement(s.b,{history:Re},r.createElement(Oe,null))),document.getElementById("root")),c.a.sync({installMode:c.b.IMMEDIATE,mandatoryInstallMode:c.b.IMMEDIATE,updateDialog:{appendReleaseDescription:!0}}).subscribe(function(e){},function(e){}),c.a.getCurrentPackage().then(function(t){if(t&&t.label){var n=e.getState().version.version+"."+t.label;e.dispatch({type:"ENAIL/VERSION/UPDATE",payload:n})}}),document.addEventListener("resume",function(){c.a.sync({installMode:c.b.IMMEDIATE,mandatoryInstallMode:c.b.IMMEDIATE,updateDialog:{appendReleaseDescription:!0}}).subscribe(function(e){},function(e){})}),Ae()};window.cordova?document.addEventListener("deviceready",ze,!1):ze()},843:function(e,t,n){e.exports=n(1005)},852:function(e,t,n){var r={"./1fcq78hk.entry.js":[1014,96],"./1fcq78hk.sc.entry.js":[1015,97],"./2i50w2lv.entry.js":[1016,98],"./2i50w2lv.sc.entry.js":[1017,99],"./39fhulxe.entry.js":[1018,100],"./39fhulxe.sc.entry.js":[1019,101],"./3hbcnxuc.entry.js":[1020,24],"./3hbcnxuc.sc.entry.js":[1021,25],"./3kzauze7.entry.js":[1022,102],"./3kzauze7.sc.entry.js":[1023,103],"./3pkkvczk.entry.js":[1024,26],"./3pkkvczk.sc.entry.js":[1025,27],"./5zcdwzsx.entry.js":[1026,44],"./5zcdwzsx.sc.entry.js":[1027,45],"./6kgso7pq.entry.js":[1028,46],"./6kgso7pq.sc.entry.js":[1029,47],"./7hlpr3fd.entry.js":[1030,12],"./7hlpr3fd.sc.entry.js":[1031,13],"./8wdovu8e.entry.js":[1032,48],"./8wdovu8e.sc.entry.js":[1033,49],"./admmxern.entry.js":[1034,104],"./admmxern.sc.entry.js":[1035,105],"./aubabxbm.entry.js":[1036,50],"./aubabxbm.sc.entry.js":[1037,51],"./azzrjyyu.entry.js":[1038,52],"./azzrjyyu.sc.entry.js":[1039,53],"./b65tzyas.entry.js":[1040,28],"./b65tzyas.sc.entry.js":[1041,29],"./bb7q7tld.entry.js":[1042,106],"./bb7q7tld.sc.entry.js":[1043,107],"./bcmaaa8l.entry.js":[1044,108],"./bcmaaa8l.sc.entry.js":[1045,109],"./bygik61u.entry.js":[1046,110],"./bygik61u.sc.entry.js":[1047,111],"./ddlg9urb.entry.js":[1048,54],"./ddlg9urb.sc.entry.js":[1049,55],"./devt5yhg.entry.js":[1050,38],"./devt5yhg.sc.entry.js":[1051,39],"./dhprnqol.entry.js":[1052,56],"./dhprnqol.sc.entry.js":[1053,57],"./djkq5plb.entry.js":[1054,112],"./djkq5plb.sc.entry.js":[1055,113],"./efdsz9yy.entry.js":[1056,140],"./efdsz9yy.sc.entry.js":[1057,141],"./eghwkqif.entry.js":[1058,58],"./eghwkqif.sc.entry.js":[1059,59],"./ek05jvfc.entry.js":[1060,60],"./ek05jvfc.sc.entry.js":[1061,61],"./ficmbhoi.entry.js":[1062,62],"./ficmbhoi.sc.entry.js":[1063,63],"./fkzdmlip.entry.js":[1064,160],"./fkzdmlip.sc.entry.js":[1065,161],"./fmzmhk3d.entry.js":[1066,114],"./fmzmhk3d.sc.entry.js":[1067,115],"./fz2rcnow.entry.js":[1068,116],"./fz2rcnow.sc.entry.js":[1069,117],"./gnkkjvvk.entry.js":[1070,118],"./gnkkjvvk.sc.entry.js":[1071,119],"./helxzsef.entry.js":[1072,162],"./helxzsef.sc.entry.js":[1073,163],"./i5bu78vq.entry.js":[1074,120],"./i5bu78vq.sc.entry.js":[1075,121],"./imcdx1xe.entry.js":[1076,146],"./imcdx1xe.sc.entry.js":[1077,147],"./iqlhkurd.entry.js":[1078,122],"./iqlhkurd.sc.entry.js":[1079,123],"./isuxxasv.entry.js":[1080,124],"./isuxxasv.sc.entry.js":[1081,125],"./iwgahuhw.entry.js":[1082,64],"./iwgahuhw.sc.entry.js":[1083,65],"./j20d1ikn.entry.js":[1084,126],"./j20d1ikn.sc.entry.js":[1085,127],"./jzwyowjw.entry.js":[1086,66],"./jzwyowjw.sc.entry.js":[1087,67],"./k6eoch7h.entry.js":[1088,14],"./k6eoch7h.sc.entry.js":[1089,15],"./kgjnfunx.entry.js":[1090,68],"./kgjnfunx.sc.entry.js":[1091,69],"./lb8tayd0.entry.js":[1092,148],"./lb8tayd0.sc.entry.js":[1093,149],"./ldqvnzrr.entry.js":[1094,34],"./ldqvnzrr.sc.entry.js":[1095,35],"./llyqw4no.entry.js":[1096,128],"./llyqw4no.sc.entry.js":[1097,129],"./lsxwd44p.entry.js":[1098,36],"./lsxwd44p.sc.entry.js":[1099,37],"./mf2ayo12.entry.js":[1100,70],"./mf2ayo12.sc.entry.js":[1101,71],"./migtpkzd.entry.js":[1102,72],"./migtpkzd.sc.entry.js":[1103,73],"./mo7qeek2.entry.js":[1104,144],"./mo7qeek2.sc.entry.js":[1105,145],"./mri9bdlj.entry.js":[1106,164],"./mri9bdlj.sc.entry.js":[1107,165],"./mrs0ks1r.entry.js":[1108,40],"./mrs0ks1r.sc.entry.js":[1109,41],"./najnlwm4.entry.js":[1110,74],"./najnlwm4.sc.entry.js":[1111,75],"./narso64l.entry.js":[1112,20],"./narso64l.sc.entry.js":[1113,21],"./nqozldol.entry.js":[1114,88],"./nqozldol.sc.entry.js":[1115,89],"./o6zsuoqi.entry.js":[1116,130],"./o6zsuoqi.sc.entry.js":[1117,131],"./oc7j8k7y.entry.js":[1118,152],"./oc7j8k7y.sc.entry.js":[1119,153],"./ofd4s8dw.entry.js":[1120,94],"./ofd4s8dw.sc.entry.js":[1121,95],"./pd9wflli.entry.js":[1122,30],"./pd9wflli.sc.entry.js":[1123,31],"./pdzm9bfy.entry.js":[1124,142],"./pdzm9bfy.sc.entry.js":[1125,143],"./r8dtlwvb.entry.js":[1126,16],"./r8dtlwvb.sc.entry.js":[1127,17],"./rkecsmgc.entry.js":[1128,154],"./rkecsmgc.sc.entry.js":[1129,155],"./rrpxfm2a.entry.js":[1130,166],"./rrpxfm2a.sc.entry.js":[1131,167],"./senscofp.entry.js":[1132,76],"./senscofp.sc.entry.js":[1133,77],"./tjefn81q.entry.js":[1134,78],"./tjefn81q.sc.entry.js":[1135,79],"./tlbladaf.entry.js":[1136,80],"./tlbladaf.sc.entry.js":[1137,81],"./tn7df4wj.entry.js":[1138,150],"./tn7df4wj.sc.entry.js":[1139,151],"./uhyavx6a.entry.js":[1140,90],"./uhyavx6a.sc.entry.js":[1141,91],"./vompwuhi.entry.js":[1142,82],"./vompwuhi.sc.entry.js":[1143,83],"./vypdotd0.entry.js":[1144,84],"./vypdotd0.sc.entry.js":[1145,85],"./wb4mk1b9.entry.js":[1146,42],"./wb4mk1b9.sc.entry.js":[1147,43],"./whjbxjrd.entry.js":[1148,22],"./whjbxjrd.sc.entry.js":[1149,23],"./wjdsdnuu.entry.js":[1150,132],"./wjdsdnuu.sc.entry.js":[1151,133],"./wrpzmdqx.entry.js":[1152,32],"./wrpzmdqx.sc.entry.js":[1153,33],"./wzw9zscm.entry.js":[1154,92],"./wzw9zscm.sc.entry.js":[1155,93],"./x5xnv4jv.entry.js":[1156,18],"./x5xnv4jv.sc.entry.js":[1157,19],"./xajhwvib.entry.js":[1158,134],"./xajhwvib.sc.entry.js":[1159,135],"./xo7dncgt.entry.js":[1160,136],"./xo7dncgt.sc.entry.js":[1161,137],"./yifvz1ud.entry.js":[1162,138],"./yifvz1ud.sc.entry.js":[1163,139],"./ymem7pf1.entry.js":[1164,86],"./ymem7pf1.sc.entry.js":[1165,87],"./ziv0mko0.entry.js":[1166,156],"./ziv0mko0.sc.entry.js":[1167,157]};function a(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],a=t[0];return n.e(t[1]).then(function(){return n(a)})}a.keys=function(){return Object.keys(r)},a.id=852,e.exports=a},859:function(e,t,n){},962:function(e,t,n){},963:function(e,t,n){},966:function(e,t,n){},967:function(e,t,n){},968:function(e){e.exports={serviceUrl:"http://pizero",socketIoUrl:"http://pizero"}},969:function(e,t,n){},970:function(e,t,n){},971:function(e,t,n){},974:function(e,t,n){},975:function(e){e.exports={name:"fc-enail-client",homepage:"http://github.cataford.com/fcenail/",version:"1.1.3-beta",private:!0,dependencies:{"@ionic/core":"^4.4.2","@ionic/react":"0.0.5","code-push":"^2.0.6","cordova-android":"^8.0.0","cordova-ios":"^5.1.1","cordova-plugin-add-swift-support":"^2.0.2","cordova-plugin-appcenter-analytics":"^0.3.3","cordova-plugin-appcenter-crashes":"^0.3.3","cordova-plugin-appcenter-shared":"^0.3.3","cordova-plugin-code-push":"^1.11.18","cordova-plugin-compat":"^1.2.0","cordova-plugin-device":"^2.0.2","cordova-plugin-dialogs":"^2.0.1","cordova-plugin-file":"^4.3.3","cordova-plugin-file-transfer":"^1.6.3","cordova-plugin-splashscreen":"^5.0.2","cordova-plugin-statusbar":"^2.4.2","cordova-plugin-whitelist":"^1.3.3","cordova-plugin-zeroconf":"^1.4.0","cordova-plugin-zip":"^3.1.0","date-fns":"^1.30.1",history:"^4.7.2","hoist-non-react-statics":"^3.3.0",less:"^3.9.0",react:"^16.8.6","react-dom":"^16.8.6","react-redux":"^7.0.3","react-router-dom":"^5.0.0","react-scripts":"^3.0.1",redux:"^4.0.1","redux-api-middleware":"^3.0.1","redux-thunk":"^2.3.0","sequential-task-queue":"^1.2.1","socket.io-client":"^2.2.0",uuid:"^3.3.2"},scripts:{start:"react-app-rewired start",build:"react-app-rewired build",test:"react-app-rewired test --env=jsdom",eject:"react-app-rewired eject",deploy:"appcenter codepush release-cordova -a J-Cat/FC-E-Nail -d Staging -t 1.0.1-beta"},devDependencies:{"@angular/core":"^7.0.3","@ionic-native/code-push":"^5.5.1","@ionic-native/core":"^5.5.1","@ionic-native/zeroconf":"^5.5.1","@types/cordova":"0.0.34","@types/hoist-non-react-statics":"^3.3.1","@types/node":"^12.0.2","@types/react":"^16.8.18","@types/react-dom":"^16.8.4","@types/react-redux":"^7.0.9","@types/react-router-dom":"^4.3.3","@types/socket.io-client":"^1.4.32","@types/uuid":"^3.4.4","customize-cra":"^0.2.12","less-loader":"^5.0.0","react-app-rewired":"^2.1.3","redux-devtools-extension":"^2.13.8",rxjs:"^6.5.2","rxjs-compat":"^6.5.2",typescript:"^3.4.5"},cordova:{plugins:{"cordova-plugin-add-swift-support":{},"cordova-plugin-splashscreen":{},"cordova-plugin-statusbar":{},"cordova-plugin-whitelist":{},"cordova-plugin-zeroconf":{},"cordova-plugin-appcenter-analytics":{},"cordova-plugin-appcenter-crashes":{},"cordova-plugin-code-push":{},"cordova-plugin-file":{},"cordova-plugin-file-transfer":{},"cordova-plugin-zip":{}},platforms:["android","ios"]},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}}},[[843,10,11]]]);
//# sourceMappingURL=main.fbd1b8d3.chunk.js.map